<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8" />
  <title>text in-out template</title>
    <script src="superfetch2.js"></script>
    <script src="server.js"></script>
    <link href="style.css" rel="stylesheet">
    
</head>

<body>
    <div id="box1">
        <h1 id="velkommen">Logg inn</h1>
    <input type ="text"     id="username" placeholder="Login name" />
    <input type="password"  id="password" placeholder="Password"  />

    <button id="btnlogin">Logg inn</button>
    <br>
    <div id="txtOut">The result...</div>
    </div>
</body>

<script>

    // init ------------------------------------------
    var username  = document.getElementById("username");
    var password  = document.getElementById("password");
    
    var btnlogin = document.getElementById("btnlogin");
    var txtOut    = document.getElementById("txtOut");

    var respStatus;
    var imgfile = "";

    btnlogin.onclick = loginUser;       

    // ----------------------------------------------
    function loginUser() { 
        
        var upload = JSON.stringify({
            username:username.value, 
            password: password.value
        })
        
        var url = "http://localhost:3000/users/auth/";
        
        var cfg = {
            method: "POST",
            body: upload
        }
        superfetch(url, "json", succ, error, cfg);   
    }
    
    // succ ------------------------------------------------
    function succ(data) {  
        
        console.log(data);
        
        localStorage.setItem("logindata", JSON.stringify(data));
        
        // token blir opprettet 
         //token inni her: localStorage.setItem("logindata", JSON.stringify(data));
        //send til ny side
       
    }
    
    // error-----------------------------------------
        
    function error(err){
        console.log(err); 
    }
        
   
</script>



</html>
